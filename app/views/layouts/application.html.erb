<!DOCTYPE html>
<html ng-app="congoApp">
  <head>
    <base href="/">
    <title>Congo2</title>
    <%= stylesheet_link_tag 'application', media: 'all' %>
    <%= javascript_include_tag 'application' %>
    <%= csrf_meta_tags %>

    <script>
      window.congo = {
        currentUser: <%= current_user ? raw(current_user.simple_hash.to_json) : 'null' %>
      }
    </script>
  </head>

  <body ng-controller="MainController">
    <header class="navbar navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".congo-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          <a href="/" class="navbar-brand">Grouphub</a>
        </div>

        <nav class="collapse navbar-collapse congo-navbar-collapse">
          <ul class="nav navbar-nav" ng-if="isSignedin()">
            <li>
              <a href="/products">Products</a>
            </li>
          </ul>

          <ul class="nav navbar-nav navbar-right" ng-if="isSignedin()">
            <li>
              <a href="">{{userName()}} <i class="caret"></i></a>
            </li>

            <li>
              <a href="" ng-click="signout()">Sign out</a>
            </li>
          </ul>

          <ul class="nav navbar-nav navbar-right" ng-if="!isSignedin()">
            <li>
              <a href="/users/signin">Sign in</a>
            </li>

            <li>
              <a href="/users/new">Sign up</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container">
      <div class="col-md-12">
        <%= yield %>
      </div>
    </main>

    <footer>
      &copy; 2014 Grouphub Inc.
    </footer>
  </body>
</html>
