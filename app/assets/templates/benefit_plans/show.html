<div class="col-md-12 benefit-plans-show">
  <!-- Carrier account may be null if it was deleted by the user. -->
  <h1 ng-if="!benefitPlan.carrier_account.name">
    {{benefitPlan.name}}
  </h1>

  <h1 ng-if="benefitPlan.carrier_account.name">
    {{benefitPlan.carrier_account.name}}: {{benefitPlan.name}}
  </h1>

  <p>Edit your benefit plan.</p>

  <form ng-submit="submit()">
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" class="form-control" id="name" placeholder="Enter name&hellip;" ng-model="form.name" auto-focus disabled="disabled" ng-if="!benefitPlan.account_id">
      <input type="text" class="form-control" id="name" placeholder="Enter name&hellip;" ng-model="form.name" auto-focus ng-if="benefitPlan.account_id">
    </div>

    <div class="form-group">
      <label for="carrier_account">Carrier</label>
      <select class="form-control" id="carrier_account" name="carrier_account" ng-model="form.carrier_account_id" disabled="disabled" ng-if="!benefitPlan.account_id">
        <option ng-repeat="carrier_account in carrierAccounts" value="{{carrier_account.id}}">{{carrier_account.name}}&mdash;{{carrier_account.carrier.name}}</option>
      </select>
      <select class="form-control" id="carrier_account" name="carrier_account" ng-model="form.carrier_account_id" ng-if="benefitPlan.account_id">
        <option ng-repeat="carrier_account in carrierAccounts" value="{{carrier_account.id}}">{{carrier_account.name}}&mdash;{{carrier_account.carrier.name}}</option>
      </select>
    </div>

    <div class="form-group">
      <label for="plan_type">Plan Type</label>
      <input type="text" class="form-control" id="plan_type" placeholder="Enter a Plan Type&hellip;" ng-model="form.plan_type" disabled="disabled" ng-if="!benefitPlan.account_id">
      <input type="text" class="form-control" id="plan_type" placeholder="Enter a Plan Type&hellip;" ng-model="form.plan_type" ng-if="benefitPlan.account_id">
    </div>

    <div class="form-group">
      <label for="exchange_plan">Exchange Plan</label>
      <input type="text" class="form-control" id="exchange_plan" placeholder="Enter an Exchange Plan&hellip;" ng-model="form.exchange_plan" disabled="disabled" ng-if="!benefitPlan.account_id">
      <input type="text" class="form-control" id="exchange_plan" placeholder="Enter an Exchange Plan&hellip;" ng-model="form.exchange_plan" ng-if="benefitPlan.account_id">
    </div>

    <div class="form-group">
      <label for="small_group">Small Group</label>
      <input type="text" class="form-control" id="small_group" placeholder="Enter a Small Group&hellip;" ng-model="form.small_group" disabled="disabled" ng-if="!benefitPlan.account_id">
      <input type="text" class="form-control" id="small_group" placeholder="Enter a Small Group&hellip;" ng-model="form.small_group" ng-if="benefitPlan.account_id">
    </div>

    <div class="form-group">
      <label for="small_group">Group ID</label>
      <input type="text" class="form-control" id="group_id" placeholder="Enter a Group ID&hellip;" ng-model="form.group_id">
    </div>

    <div class="row">
      <div class="form-group col-md-6">
        <label for="description">Description</label>
        <textarea class="form-control markdown" id="description" placeholder="Enter a Description&hellip;" ng-model="form.description_markdown" disabled="disabled" ng-if="!benefitPlan.account_id"></textarea>
        <textarea class="form-control markdown" id="description" placeholder="Enter a Description&hellip;" ng-model="form.description_markdown" ng-if="benefitPlan.account_id"></textarea>
        <small>
          Enter a description using Markdown. <a href="">Click here</a> for a Markdown reference.
        </small>
      </div>

      <div class="form-group col-md-6">
        <label for="markdown">Preview</label>
        <div id="markdown" ng-bind-html="form.description_trusted"></div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <input type="submit" class="btn btn-primary" value="Update Benefit Plan" disabled="disabled" ng-if="!benefitPlan.account_id">
        <input type="submit" class="btn btn-primary" value="Update Benefit Plan" ng-if="benefitPlan.account_id">
      </div>
    </div>
  </form>

  <hr>

  <h2>Attachments</h2>

  <table class="table">
    <thead>
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr ng-repeat="attachment in benefitPlan.attachments">
        <td>{{attachment.title}}</td>

        <td>{{attachment.description}}</td>

        <td>
          <a class="btn btn-default btn-xs" target="_blank" ng-href="{{attachment.url}}">Preview</a>
          <a href="" class="btn btn-danger btn-xs" ng-click="deleteAttachmentAt($index)">Delete</a>
        </td>
      </tr>
    </tbody>
  </table>

  <hr>

  <form id="new-attachment" class="new-attachment" ng-submit="newAttachment()">
    <div class="form-group">
      <label for="title">Title</label>
      <input type="title" class="form-control" id="title" placeholder="Enter a Title&hellip;" ng-model="attachmentFormData.title" disabled="disabled" ng-if="!benefitPlan.account_id">
      <input type="title" class="form-control" id="title" placeholder="Enter a Title&hellip;" ng-model="attachmentFormData.title" ng-if="benefitPlan.account_id">
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <input type="description" class="form-control" id="description" placeholder="Enter a Description&hellip;" ng-model="attachmentFormData.description" disabled="disabled" ng-if="!benefitPlan.account_id">
      <input type="description" class="form-control" id="description" placeholder="Enter a Description&hellip;" ng-model="attachmentFormData.description" ng-if="benefitPlan.account_id">
    </div>

    <div class="form-group">
      <label for="file">File</label>
      <input type="file" class="form-control" id="file" onchange="angular.element(this).scope().fileChanged(this)" disabled="disabled" ng-if="!benefitPlan.account_id">
      <input type="file" class="form-control" id="file" onchange="angular.element(this).scope().fileChanged(this)" ng-if="benefitPlan.account_id">
    </div>

    <input type="submit" class="btn btn-primary" value="Add Attachment" disabled="disabled" ng-if="!benefitPlan.account_id">
    <input type="submit" class="btn btn-primary" value="Add Attachment" ng-if="benefitPlan.account_id">
  </form>
</div>

